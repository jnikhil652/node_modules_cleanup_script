#!/bin/bash

# Function to delete node_modules folder
delete_node_modules() {
    local folder_path=$1
    if [[ -d "$folder_path/node_modules" ]]; then
        echo "Deleting node_modules in: $folder_path/node_modules"
        rm -rf "$folder_path/node_modules"
    fi
}

# Function to recursively search and delete node_modules
search_and_delete_node_modules() {
    local current_dir=$1
    for dir in "$current_dir"/*; do
        if [[ -d "$dir" ]]; then
            delete_node_modules "$dir"
            search_and_delete_node_modules "$dir"
        fi
    done
}

# Check if the directory is provided as an argument
if [[ $# -ne 1 ]]; then
    echo "Usage: $0 <directory>"
    exit 1
fi

# Check if the directory exists
if [[ ! -d "$1" ]]; then
    echo "Error: Directory '$1' does not exist."
    exit 1
fi

# Start searching and deleting node_modules
search_and_delete_node_modules "$1"

echo "Node_modules cleanup completed."
